<!DOCTYPE html>
<html>
<head>
  <title></title>
  <link rel="stylesheet" href="/static/css/basic_chart.css">
</head>
<body>
<p>Basic charts</p>
<div id=drag></div>
<div id=stackked></div>
<script src="/static/js/vendor/d3.v3.min.js"></script>
<script src="/static/js/graphs/basic_chart.js"></script>
<script>
  var _data,
    width = 800,
    height = 300,
    parse_date = d3.time.format('%Y').parse;
  d3.json('/static/js/state_data.json', function(_data) {
    _s = _data.features.filter(function(d) {
      return (d.properties.machine_name == 'illinois') ? d : null;
    })[0];
    _data = [{type: 'rps', data: []}]
    _s.properties.trajectory.forEach(function(d, i) {
      _data[0].data[i] = {y: d * 100, x: parse_date(String(i + 2000))};
    });
    console.log(_data);
    d3.select('#drag').style('width', width + 'px').style('height', height + 'px');
    var foo = new RPSGraph()
      .padding(10, 10, 30, 30)
      .width(width).height(height)
      .select('#drag')
      .x(d3.time.scale())
      .y(d3.scale.linear())
      .domain([new Date(2013, 0, 1), new Date(2030, 0, 1)], [0, 100])
      .max_domains([50, 100])
{#      .data([_s.properties.trajectory])#}
      .data(_data)
      .hoverable(true)
      .draggable(true)
      .ghost(_data[0])
      .default_line(_data[0])
      .format_x(function(x) { return x.getFullYear(); })
      .format_y(function(y) { return d3.format('.1f')(y); })
{#      .colors(['#f00'])#}
      .h_grid(true)
      .draw();
  });
</script>
</body>
</html>
